@font-face {
    font-family: 'Helvetica Bold';
    src: url('fonts/Gotham-Bold.otf') format('opentype');
    font-weight: bold;
    font-style: normal;
}

/* Add new font-face for scrolling text */
@font-face {
    font-family: 'SaoChingcha';
    src: url('fonts/SaoChingcha-Bold.otf') format('opentype');
    font-weight: bold;
    font-style: normal;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background-color: #ff6868; /* Orangish pink color */
    font-family: 'Helvetica Bold', Arial, sans-serif;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
}

.container {
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    padding-bottom: 10vh; /* Add padding to the bottom to move everything up */
}

/* Rectangle that appears above the text */
.disappearing-rectangle {
    position: fixed; /* Fixed to viewport */
    top: 0; /* Start from the very top of the viewport */
    left: 0;
    width: 100%;
    height: calc(50vh + 300px); /* Height to cover both half the viewport plus the maximum move-up distance */
    background-color: inherit; /* Will inherit from body */
    z-index: 10;
}

/* Digits for final animation */
.digit {
    display: inline-block;
    position: relative;
    z-index: 5; /* Lower than the rectangle */
}

/* Animation for the digits moving up */
.move-up {
    transform: translateY(-300px); /* Use absolute value to ensure enough movement */
    transition: transform 1.2s ease;
}

.number {
    font-size: 15vw; /* Responsive text size */
    color: rgb(255, 192, 74);
    font-family: 'Helvetica Bold', Arial, sans-serif;
    font-weight: bold;
    letter-spacing: -0.05em; /* Tighter letter spacing */
    position: relative;
    display: inline-block;
    margin-top: -5vh; /* Move the number up slightly to improve centering */
}

.credit {
    position: absolute;
    bottom: 15vh; /* Increased from 8vh to 15vh to move it much higher */
    font-size: 2vmin; /* Responsive text size */
    color: rgb(255, 192, 74);
    font-family: 'Helvetica Bold', Arial, sans-serif;
    letter-spacing: -0.02em; /* Slightly tighter letter spacing */
}

/* Add media queries to position credit even higher on smaller screens */
@media (max-width: 768px) {
    .credit {
        bottom: 18vh; /* Higher position on tablets */
        font-size: 2.5vmin; /* Slightly larger for better visibility */
    }
}

@media (max-width: 480px) {
    .credit {
        bottom: 22vh; /* Much higher position on mobile phones */
        font-size: 3vmin; /* Larger text size on small screens */
    }
}

/* Remove the container::before pseudo-element as we're using a real element now */
.container::before {
    display: none;
}

/* Stacking rectangles animation */
.stacking-rectangle {
    position: absolute;
    left: 0;
    width: 100%;
    height: 100%; /* Ensure full height */
    top: 0; /* Position from top */
    transform: translateY(-100%); /* Start above the viewport */
    transition: transform 1.2s cubic-bezier(0.25, 1, 0.5, 1) !important; /* Restore animation */
    display: flex;
    align-items: center;
    margin: 0 !important; /* Remove any margin */
    padding: 0 !important; /* Remove any padding */
    border: none !important; /* Remove any border */
    box-sizing: border-box;
}

/* Three distinct rectangle colors that will repeat */
.stacking-rectangle:nth-of-type(3n+1) {
    background-color: #ff8255; /* Orange */
    z-index: 30; /* Higher z-index for first rectangle */
}

.stacking-rectangle:nth-of-type(3n+2) {
    background-color: #67b8ff; /* Blue */
    z-index: 29; /* Middle z-index */
}

.stacking-rectangle:nth-of-type(3n+3) {
    background-color: #e5fc64; /* Light green */
    z-index: 28; /* Lower z-index */
}

/* First rectangle specifically */
.stacking-rectangle:first-child {
    background-color: #ff8255 !important; /* Force orange for first rectangle */
    z-index: 32 !important; /* Highest z-index */
}

/* Animation class to make rectangles slide down */
.slide-down {
    transform: translateY(0) !important; /* Ensure full movement with !important */
}

/* Container for stacking rectangles */
.stacking-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    z-index: 15; /* Higher than other elements */
    display: none; /* Initially hidden */
    overflow: hidden; /* Prevent scrollbars */
    transform-style: preserve-3d;
}

/* Scrolling text styling */
.scrolling-text-container {
    width: 100%;
    height: 100%;
    overflow: hidden;
    position: absolute;
    top: 0;
    left: 0;
    display: flex;
    align-items: center;
    pointer-events: none; /* Allow clicks to pass through */
}

/* Marquee content for seamless looping */
.marquee-content {
    display: flex;
    height: 100%;
    align-items: center; /* Center text vertically */
    position: absolute;
    white-space: nowrap;
    will-change: transform; /* Performance optimization for smooth animation */
    animation: none; /* Remove any conflicting animations */
    width: 50%; /* Each copy takes half the wrapper width */
    flex-shrink: 0;
    padding: 0; /* Remove padding to prevent uneven spacing */
}

/* Individual text spans */
.marquee-text, .marquee-space {
    display: inline-flex;
    align-items: center; /* Center text vertically */
    justify-content: center;
    font-family: 'SaoChingcha', Arial, sans-serif; /* Updated font */
    font-weight: bold;
    color: white;
    line-height: 1;
    white-space: nowrap;
    text-transform: uppercase;
    height: auto; /* Fix missing semicolon */
    margin-right: 0.1em; /* Add slight spacing between repeated words */
}

/* Animation for seamless right-to-left scrolling */
.scroll-right-to-left {
    animation: marqueeRTL 60s linear infinite;
}

/* Animation for seamless left-to-right scrolling */
.scroll-left-to-right {
    animation: marqueeLTR 60s linear infinite;
}

/* Keyframes for right-to-left continuous scrolling */
@keyframes marqueeRTL {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-100%);
    }
}

/* Keyframes for left-to-right continuous scrolling */
@keyframes marqueeLTR {
    0% {
        transform: translateX(-100%);
    }
    100% {
        transform: translateX(0);
    }
}

/* Base styling for scrolling text */
.scrolling-text {
    font-family: 'SaoChingcha', Arial, sans-serif; /* Updated font */
    font-weight: bold;
    color: white;
    white-space: nowrap;
    position: absolute;
    width: max-content;
    height: 100%;
    display: flex;
    align-items: center; /* Center vertically instead of flex-end */
    box-sizing: border-box;
    line-height: 1; /* Ensure line height is exact */
    text-transform: uppercase; /* Ensure all uppercase */
    will-change: transform; /* Performance optimization */
    
    /* Default position */
    left: 0;
}

/* Text sizing based on content to fit the stripe height perfectly */
.scrolling-text:contains('HAPPY') {
    font-size: 92%; /* Adjusted for HAPPY */
}

.scrolling-text:contains('BIRTHDAY') {
    font-size: 90%; /* Adjusted for BIRTHDAY - slightly smaller due to ascenders */
}

.scrolling-text:contains('DAD') {
    font-size: 92%; /* Adjusted for DAD */
}

/* For browsers that don't support :contains, fallback to the JS-added classes */
.stacking-rectangle .scrolling-text {
    font-size: unset; /* Remove conflicting font size */
}

/* Specific stripe-based adjustments */
.stacking-rectangle {
    display: flex;
    align-items: center;
}

/* Apply specific font sizing based on rectangle height */
.stacking-rectangle:nth-of-type(3n+1) .scrolling-text {
    height: 100%;
    font-size: 100%; /* Full height for orange stripes */
}

.stacking-rectangle:nth-of-type(3n+2) .scrolling-text {
    height: 100%;
    font-size: 100%; /* Full height for blue stripes */
}

.stacking-rectangle:nth-of-type(3n+3) .scrolling-text {
    height: 100%;
    font-size: 100%; /* Full height for green stripes */
}

/* Animation for right-to-left scrolling */
.scroll-right-to-left {
    animation: scrollRightToLeft linear infinite;
    /* Duration is set in JS for consistent speed */
}

/* Animation for left-to-right scrolling */
.scroll-left-to-right {
    animation: scrollLeftToRight linear infinite;
    /* Duration is set in JS for consistent speed */
}

@keyframes scrollRightToLeft {
    0% {
        transform: translateX(100%);
    }
    100% {
        transform: translateX(-100%);
    }
}

@keyframes scrollLeftToRight {
    0% {
        transform: translateX(-100%);
    }
    100% {
        transform: translateX(100%);
    }
}

@keyframes marquee-right {
    0% { transform: translate3d(0, 0, 0); }
    100% { transform: translate3d(-100%, 0, 0); }
}

@keyframes marquee-left {
    0% { transform: translate3d(-100%, 0, 0); }
    100% { transform: translate3d(0, 0, 0); }
}

/* Media queries for font sizing */
@media (max-width: 768px) {
    .content {
        animation-duration: 18s;
    }
}

@media (max-width: 480px) {
    .content {
        animation-duration: 15s;
    }
}

.text-scroller {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    overflow: hidden;
}

.text-track {
    display: flex;
    white-space: nowrap;
    will-change: transform;
    animation-duration: 30s;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
}

.rtl .text-track {
    animation-name: scroll-text-rtl;
}

.ltr .text-track {
    animation-name: scroll-text-ltr;
}

.scroll-text {
    display: inline-block;
    font-family: 'SaoChingcha', Arial, sans-serif; /* Updated font */
    font-weight: bold;
    color: white;
    text-transform: uppercase;
}

@keyframes scroll-text-rtl {
    from { transform: translateX(0); }
    to { transform: translateX(-50%); }
}

@keyframes scroll-text-ltr {
    from { transform: translateX(-50%); }
    to { transform: translateX(0); }
}

/* Clean up all existing marquee/scrolling text styles */
.scrolling-text-container, .marquee-content {
    width: 100%;
    height: 100%;
    overflow: hidden;
    position: relative;
}

/* Add to styles.css */
.marquee-wrapper {
    position: absolute;
    width: 200%; /* Double width to fit two copies */
    height: 100%;
    display: flex;
    align-items: center; /* Center content vertically */
    overflow: hidden;
}

.marquee-content {
    width: 50%; /* Each copy takes half the wrapper width */
    flex-shrink: 0;
    display: flex;
    white-space: nowrap;
    padding: 0; /* Remove padding to prevent uneven spacing */
}

.marquee-content:has(.marquee-text:contains("BIRTHDAY")) {
    letter-spacing: 0.05em; /* Increase spacing for BIRTHDAY to prevent overlap */
}

.scroll-rtl {
    animation: scroll-rtl 25s linear infinite;
}

.scroll-ltr {
    animation: scroll-ltr 25s linear infinite;
}

@keyframes scroll-rtl {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-50%); /* Move exactly one copy width */
    }
}

@keyframes scroll-ltr {
    0% {
        transform: translateX(-50%); /* Start from negative position */
    }
    100% {
        transform: translateX(0);
    }
}

/* Individual text items */
.marquee-text:contains("BIRTHDAY") {
    margin-right: 1em; /* Ensure spacing after BIRTHDAY */
    transform: scale(0.95); /* Slightly reduce size to prevent overlap */
}

/* Scrolling text styling - cleaned up version */
.scrolling-text-container {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
    display: flex;
    align-items: center;
}

.marquee {
    width: 100%;
    overflow: hidden;
}

.track {
    white-space: nowrap;
}

.content {
    display: inline-block;
    padding-right: 100%; /* Create spacing between iterations */
    animation: marquee 25s linear infinite;
}

.marquee[direction="right"] .content {
    animation-name: marquee-right;
}

.marquee[direction="left"] .content {
    animation-name: marquee-left;
}

.word {
    font-family: 'SaoChingcha', Arial, sans-serif; /* Updated font */
    font-weight: bold;
    color: white;
    text-transform: uppercase;
    margin-right: 1em; /* Space between words */
}

/* Base styling for scrolling text */
.scrolling-text {
    font-family: 'SaoChingcha', Arial, sans-serif; /* Updated font */
    font-weight: bold;
    color: white;
    white-space: nowrap;
    position: absolute;
    width: max-content;
    height: 100%;
    display: flex;
    align-items: center; /* Center vertically instead of flex-end */
    box-sizing: border-box;
    line-height: 1;
    text-transform: uppercase;
    will-change: transform;
    
    /* Default position */
    left: 0;
}

/* Remove all duplicate/conflicting animation keyframes and use only these */
@keyframes scrollRightToLeft {
    from {
        transform: translateX(100%);
    }
    to {
        transform: translateX(-100%);
    }
}

@keyframes scrollLeftToRight {
    from {
        transform: translateX(-100%);
    }
    to {
        transform: translateX(100%);
    }
}

/* Fix small gaps between colored stripes by using a more aggressive approach */
.stacking-rectangle:nth-of-type(n+2) {
    margin-top: -8px !important; /* Base overlap for all stripes */
}

/* Special fix for first and second stripe gap */
.stacking-rectangle:nth-of-type(2) {
    margin-top: -10px !important; /* Slightly increased overlap */
}

/* Special fix for second and third stripe gap - increased overlap */
.stacking-rectangle:nth-of-type(3) {
    margin-top: -12px !important; /* Further increased overlap to eliminate gap with second stripe */
}

/* Ensure proper overlap continues for all subsequent stripes */
.stacking-rectangle:nth-of-type(n+4) {
    margin-top: -10px !important; /* Apply same overlap to all remaining stripes */
}

/* Zoom effect styles */
.zoom-ready {
    perspective: 1000px;
    transition: filter 0.5s ease;
}

.zoom-ready .stacking-rectangle {
    transition: transform 0.5s ease;
}

.scroll-text {
    display: inline-block;
    font-family: 'SaoChingcha', Arial, sans-serif;
    font-weight: bold;
    color: white;
    text-transform: uppercase;
    transition: transform 0.5s ease, letter-spacing 0.5s ease;
    transform-origin: center;
}

.interaction-hint {
    position: fixed;
    bottom: 5%;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 10px 20px;
    border-radius: 30px;
    font-size: 16px;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.5s ease;
    pointer-events: none;
    text-align: center;
    font-family: Arial, sans-serif;
}

#zoom-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: white;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.5s ease;
    pointer-events: none;
}

#birthday-message {
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    letter-spacing: 0.05em;
    line-height: 1.5;
}

/* Prevent body scrolling when zooming */
body.zooming {
    overflow: hidden;
}

/* Media queries for font sizing in birthday message */
@media (max-width: 768px) {
    #birthday-message {
        font-size: 8vw;
    }
}

@media (max-width: 480px) {
    #birthday-message {
        font-size: 10vw;
    }
    
    .interaction-hint {
        font-size: 14px;
        padding: 8px 16px;
    }
}

/* Enhanced zoom styles */
.zoom-target-stripe {
    z-index: 35 !important; /* Ensure this stripe is above all others */
    transition: transform 0.7s cubic-bezier(0.165, 0.84, 0.44, 1),
                height 0.7s cubic-bezier(0.165, 0.84, 0.44, 1) !important;
    transform-origin: center center;
    will-change: transform, height; /* Optimize for animation performance */
}

.zoom-target-text {
    position: relative;
    transition: transform 0.7s cubic-bezier(0.165, 0.84, 0.44, 1),
                letter-spacing 0.7s cubic-bezier(0.165, 0.84, 0.44, 1),
                opacity 0.7s ease !important;
    transform-origin: center center;
    z-index: 36;
}

/* Emphasize the gaps between characters during zoom */
.scroll-text {
    transition: transform 0.7s cubic-bezier(0.165, 0.84, 0.44, 1),
                letter-spacing 0.7s cubic-bezier(0.165, 0.84, 0.44, 1),
                opacity 0.7s ease;
}

/* 3D effect enhancements */
.zoom-ready {
    perspective: 1000px;
    perspective-origin: center center;
    transition: perspective 0.7s ease;
    transform-style: preserve-3d; /* Enable 3D for child elements */
    height: 100vh;
    width: 100vw;
    overflow: hidden;
}

/* Ensure all rectangle transitions are smooth */
.zoom-ready .stacking-rectangle {
    transition: transform 0.7s cubic-bezier(0.165, 0.84, 0.44, 1),
                height 0.7s cubic-bezier(0.165, 0.84, 0.44, 1),
                opacity 0.7s ease;
    transform-style: preserve-3d;
}

/* Make stacking container handle overflow properly during zoom */
.stacking-container {
    transform-style: preserve-3d;
    overflow: hidden;
}

/* Override previous overlap settings during zoom animation */
.zoom-ready .stacking-rectangle:nth-of-type(n+2) {
    margin-top: 0 !important;
}

/* Adjust text scroller container to handle expanding height */
.zoom-target-stripe .text-scroller {
    height: 100%;
}

/* Enhanced zoom styles for diving into character gaps */
.zoom-target-stripe {
    z-index: 35 !important; /* Ensure this stripe is above all others */
    transition: transform 1s cubic-bezier(0.165, 0.84, 0.44, 1) !important;
    transform-origin: center center;
    will-change: transform;
    backface-visibility: hidden; /* Prevent flickering */
    filter: none !important; /* Ensure no blur is applied */
}

.zoom-target-text {
    position: relative;
    transition: transform 1s cubic-bezier(0.165, 0.84, 0.44, 1),
                letter-spacing 1s cubic-bezier(0.165, 0.84, 0.44, 1),
                opacity 1s ease !important;
    transform-origin: center center;
    z-index: 36;
    backface-visibility: hidden; /* Prevent flickering */
    -webkit-font-smoothing: subpixel-antialiased; /* Better font rendering */
}

/* Character gap emphasis effect - ensure sharp rendering */
.scroll-text {
    transition: transform 1s cubic-bezier(0.165, 0.84, 0.44, 1),
                letter-spacing 1s cubic-bezier(0.165, 0.84, 0.44, 1),
                opacity 1s ease;
    backface-visibility: hidden; /* Prevent flickering */
    -webkit-font-smoothing: subpixel-antialiased; /* Better font rendering */
    text-rendering: geometricPrecision; /* Sharper text rendering */
    filter: none !important; /* No blur */
}

/* Enhance 3D effects for zoom while keeping sharpness */
.zoom-ready {
    perspective: 1000px;
    perspective-origin: 50% 50%;
    transition: perspective 1s ease;
    transform-style: preserve-3d;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
    backface-visibility: hidden;
    filter: none !important; /* No blur */
}

/* Smoother overlay transition */
#zoom-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    opacity: 0;
    transition: opacity 1.5s cubic-bezier(0.165, 0.84, 0.44, 1);
    pointer-events: none;
    filter: none !important; /* No blur */
}

/* Animation pause control */
.paused {
    animation-play-state: paused !important;
}

/* Fix stacking rectangle container settings for zooming */
.stacking-container {
    overflow: hidden;
    transform-style: preserve-3d;
    filter: none !important; /* No blur */
}

/* Text scroller sizing during zoom */
.zoom-target-stripe .text-scroller {
    height: 100%;
    filter: none !important; /* No blur */
}

/* Cleaner text rendering during zoom */
.zoom-ready .scroll-text {
    will-change: letter-spacing, opacity;
    -webkit-font-smoothing: subpixel-antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: geometricPrecision;
}

/* Force all potential blur sources to be sharp */
.zoom-target-stripe *,
.zoom-ready * {
    filter: none !important;
    backface-visibility: hidden;
}

/* Optimize Thai text rendering */
:lang(th) {
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: subpixel-antialiased;
}

/* Enhanced zoom styles for diving into character gaps */
.zoom-target-stripe {
    z-index: 35 !important; /* Ensure this stripe is above all others */
    transition: transform 1s cubic-bezier(0.165, 0.84, 0.44, 1) !important;
    transform-origin: center center;
    will-change: transform, filter;
}

.zoom-target-text {
    position: relative;
    transition: transform 1s cubic-bezier(0.165, 0.84, 0.44, 1),
                letter-spacing 1s cubic-bezier(0.165, 0.84, 0.44, 1),
                opacity 1s ease !important;
    transform-origin: center center;
    z-index: 36;
}

/* Character gap emphasis effect */
.scroll-text {
    transition: transform 1s cubic-bezier(0.165, 0.84, 0.44, 1),
                letter-spacing 1s cubic-bezier(0.165, 0.84, 0.44, 1),
                opacity 1s ease;
}

/* Enhance 3D effects for zoom */
.zoom-ready {
    perspective: 1000px;
    perspective-origin: 50% 50%;
    transition: perspective 1s ease;
    transform-style: preserve-3d;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
}

/* Smoother overlay transition */
#zoom-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    opacity: 0;
    transition: opacity 1.5s cubic-bezier(0.165, 0.84, 0.44, 1);
    pointer-events: none;
}

/* Animation pause control */
.paused {
    animation-play-state: paused !important;
}

/* Fix stacking rectangle container settings for zooming */
.stacking-container {
    overflow: hidden;
    transform-style: preserve-3d;
}

/* Text scroller sizing during zoom */
.zoom-target-stripe .text-scroller {
    height: 100%;
}

/* Cleaner text rendering during zoom */
.zoom-ready .scroll-text {
    will-change: transform, letter-spacing, opacity;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Enhanced zoom styles */
.zoom-target-stripe {
    z-index: 35 !important; /* Ensure this stripe is above all others */
    transition: transform 0.7s cubic-bezier(0.165, 0.84, 0.44, 1) !important;
    transform-origin: center center;
}

.zoom-target-text {
    position: relative;
    transition: transform 0.7s cubic-bezier(0.165, 0.84, 0.44, 1),
                letter-spacing 0.7s cubic-bezier(0.165, 0.84, 0.44, 1),
                opacity 0.7s ease !important;
    transform-origin: center center;
    z-index: 36;
}

/* Emphasize the gaps between characters during zoom */
.scroll-text {
    opacity: 0.5s ease;
    transform-style: preserve-3d;
}

/* Override animation pausing/resuming for smoother transitions */
.text-track.paused {
    animation-play-state: paused !important;
}

/* Make overlay transitions smoother */
#zoom-overlay {
    transition: opacity 1s cubic-bezier(0.165, 0.84, 0.44, 1);
}

/* Make birthday message fade in more smoothly */
#birthday-message {
    transition: opacity 2s cubic-bezier(0.165, 0.84, 0.44, 1);
}

/* Enhanced zoom styles for realistic character gap zoom */
.zoom-target-stripe {
    z-index: 35 !important;
    transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1),
                height 0.8s cubic-bezier(0.23, 1, 0.32, 1),
                opacity 0.8s cubic-bezier(0.23, 1, 0.32, 1) !important;
    transform-origin: center center;
    will-change: transform, height;
    backface-visibility: hidden;
    filter: none !important;
}

/* Optimize scrolling text for high-quality scaling */
.zoom-target-stripe .scroll-text {
    transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1),
                letter-spacing 0.8s cubic-bezier(0.23, 1, 0.32, 1),
                opacity 0.8s ease;
    transform-origin: center center;
    will-change: transform, letter-spacing;
    backface-visibility: hidden;
    -webkit-font-smoothing: subpixel-antialiased;
    text-rendering: geometricPrecision;
    filter: none !important;
}

/* Enhance 3D effects while maintaining sharpness */
.zoom-ready {
    perspective: 1000px;
    perspective-origin: 50% 50%;
    transition: perspective 0.8s ease;
    transform-style: preserve-3d;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
}

/* Eliminate gap issues during zoom */
.zoom-ready .stacking-rectangle {
    margin-top: 0 !important;
    transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1),
                height 0.8s cubic-bezier(0.23, 1, 0.32, 1),
                opacity 0.8s cubic-bezier(0.23, 1, 0.32, 1);
    transform-style: preserve-3d;
}

/* Optimize text containers for zoom */
.zoom-target-stripe .text-scroller {
    height: 100%;
    filter: none !important;
    will-change: transform;
}

/* Ensure text track adapts to height changes */
.zoom-target-stripe .text-track {
    height: 100%;
    align-items: center;
}

/* Optimize Thai text for sharper rendering */
[lang="th"], 
.scroll-text {
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: subpixel-antialiased;
    font-feature-settings: "kern" 1;
    letter-spacing: normal; /* Initial state before zoom */
}

/* Remove any blur from the entire zoom chain */
.zoom-ready *,
.stacking-container *,
.zoom-target-stripe *,
#zoom-overlay {
    filter: none !important;
}

/* Container optimizations */
.stacking-container {
    transform-style: preserve-3d;
    overflow: hidden;
}

/* Smoother overlay transition for final fade */
#zoom-overlay {
    transition: opacity 1.5s cubic-bezier(0.23, 1, 0.32, 1);
    background-blend-mode: normal;
}

/* Maintain smooth animation while paused */
.text-track.paused {
    animation-play-state: paused !important;
}

/* Enhanced zoom styles for realistic immersive movement */
.zoom-ready {
    perspective: 1000px;
    perspective-origin: 50% 50%;
    transition: transform 1s cubic-bezier(0.19, 1, 0.22, 1), 
                perspective 1s cubic-bezier(0.19, 1, 0.22, 1);
    transform-style: preserve-3d;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
    transform-origin: center center;
    will-change: transform, perspective;
}

/* Keep stripes visually stable during zoom */
.zoom-ready .stacking-rectangle {
    transition: transform 1s cubic-bezier(0.19, 1, 0.22, 1),
                opacity 1s cubic-bezier(0.19, 1, 0.22, 1);
    transform-style: preserve-3d;
    will-change: transform;
    backface-visibility: hidden;
}

/* Optimize scrolling text for "moving through" effect */
.zoom-ready .scroll-text {
    transition: letter-spacing 1s cubic-bezier(0.19, 1, 0.22, 1),
                opacity 1s cubic-bezier(0.19, 1, 0.22, 1);
    transform-origin: center center;
    will-change: letter-spacing, opacity;
    backface-visibility: hidden;
    -webkit-font-smoothing: subpixel-antialiased;
    text-rendering: geometricPrecision;
    letter-spacing: normal; /* Initial state */
}

/* Extra targeting for the target stripe */
.zoom-target-stripe {
    z-index: 35 !important;
    /* No transform transitions, handled by JS for better control */
}

/* Remove all blur effects and ensure consistent text rendering */
.zoom-ready *,
.stacking-container *,
.text-scroller *,
.text-track *,
.scroll-text,
#zoom-overlay {
    filter: none !important;
}

/* Optimize Thai text rendering */
[lang="th"], 
.scroll-text {
    letter-spacing: normal; /* Initial state before zoom */
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: subpixel-antialiased;
}

/* Main container optimization for 3D effects */
.stacking-container {
    transform-style: preserve-3d;
    transition: transform 1s cubic-bezier(0.19, 1, 0.22, 1);
}

/* Text track that holds the actual text */
.zoom-ready .text-track {
    height: 100%;
    display: flex;
    align-items: center;
    transform-style: preserve-3d;
}

/* Overlay for the final transition */
#zoom-overlay {
    transition: opacity 2s cubic-bezier(0.19, 1, 0.22, 1);
    background-blend-mode: normal;
    will-change: opacity;
}

/* Enhanced zoom styles for cohesive movement */
.zoom-ready {
    perspective: 1200px;
    perspective-origin: 50% 50%;
    transition: transform 1.5s cubic-bezier(0.23, 1, 0.32, 1), /* Slower transition */
                perspective 1.5s cubic-bezier(0.23, 1, 0.32, 1);
    transform-style: preserve-3d;
    transform-origin: center center;
    will-change: transform, perspective;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
}

/* Keep all stripes together during zoom */
.zoom-ready .stacking-rectangle {
    transition: transform 1s cubic-bezier(0.23, 1, 0.32, 1);
    transform-style: preserve-3d;
    /* Don't use will-change for transform here to prevent compositing issues */
    backface-visibility: hidden;
}

/* Text styles for smooth transitions */
.zoom-ready .scroll-text {
    transition: letter-spacing 1s cubic-bezier(0.23, 1, 0.32, 1),
                opacity 1s cubic-bezier(0.23, 1, 0.32, 1);
    transform-origin: center center;
    will-change: letter-spacing;
    backface-visibility: hidden;
    -webkit-font-smoothing: subpixel-antialiased;
    text-rendering: geometricPrecision;
    letter-spacing: normal; /* Initial state */
}

/* Make sure the stripes don't have margins during zoom */
.zoom-ready .stacking-rectangle:nth-of-type(n) {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
}

/* Unified container transformation */
.stacking-container {
    transform-style: preserve-3d;
    transition: transform 1s cubic-bezier(0.23, 1, 0.32, 1);
    transform-origin: center center;
    overflow: hidden;
}

/* Make sure all elements stay sharp */
.zoom-ready *,
.stacking-container *,
.text-scroller *,
.text-track *,
.scroll-text,
#zoom-overlay {
    filter: none !important;
}

/* Ensure text tracks maintain height */
.zoom-ready .text-track {
    height: 100%;
    display: flex;
    align-items: center;
    transform-style: preserve-3d;
}

/* Final overlay transition */
#zoom-overlay {
    transition: opacity 1.5s cubic-bezier(0.23, 1, 0.32, 1);
    background-blend-mode: normal;
    will-change: opacity;
}

/* Override letter spacing changes to maintain text structure */
.scroll-text,
.zoom-ready .scroll-text,
.zoom-target-stripe .scroll-text {
    letter-spacing: normal !important;
    transition-property: opacity !important; /* Only allow opacity transitions */
    color: white !important; /* Keep text white */
}

/* Preserve text structure during zoom */
.zoom-target-text {
    letter-spacing: inherit !important; /* Use the original spacing */
}

/* Remove all transitions that affect letter spacing */
.zoom-ready .stacking-rectangle .scroll-text {
    transition: opacity 1s cubic-bezier(0.19, 1, 0.22, 1) !important;
    letter-spacing: normal !important;
}

/* Force opacity to stay at 1 for all text */
.zoom-ready .stacking-rectangle .scroll-text,
.zoom-target-stripe .scroll-text {
    opacity: 1 !important;
}

/* Update text elements to support accelerated scaling during zoom */
.zoom-ready .scroll-text {
    transform-origin: center center !important;
    transition: transform 0.8s cubic-bezier(0.19, 1, 0.22, 1) !important; 
    will-change: transform !important;
    opacity: 1 !important;
    color: white !important;
    backface-visibility: hidden;
    -webkit-font-smoothing: subpixel-antialiased;
    text-rendering: geometricPrecision;
}

/* Special handling for target text elements */
.zoom-target-stripe .scroll-text {
    transform-origin: center center !important;
    transition: transform 0.8s cubic-bezier(0.1, 1, 0.2, 1) !important; 
    will-change: transform !important;
    z-index: 100;
}

/* Ensure overlay doesn't block text in the scaled view */
#zoom-overlay {
    z-index: 90; /* Below the scaled text */
}

/* Improved acceleration timing function for text elements */
.zoom-ready .stacking-rectangle .scroll-text {
    transition: transform 0.8s cubic-bezier(0.19, 1, 0.22, 1) !important;
}

/* Update text scaling effect to be more dramatic in the final phase */
.zoom-ready .scroll-text {
    transform-origin: center center !important;
    transition: transform 0.5s cubic-bezier(0.2, 1, 0.3, 1) !important; /* Faster transition */
    will-change: transform !important;
    opacity: 1 !important;
    color: white !important;
    backface-visibility: hidden;
}

/* Special handling for target text elements in final zoom phase */
.zoom-target-stripe .scroll-text {
    transform-origin: center center !important;
    transition: transform 0.4s cubic-bezier(0.1, 1, 0.2, 1) !important; /* Even faster transition */
    will-change: transform !important;
    z-index: 100;
}

/* Make overlay appear behind the expanding text */
#zoom-overlay {
    z-index: 90; /* Below the scaled text */
    transition: opacity 1.2s cubic-bezier(0.19, 1, 0.22, 1);
}

/* Update text scaling effect for more subtle final phase scaling */
.zoom-ready .scroll-text {
    transform-origin: center center !important;
    transition: transform 0.7s cubic-bezier(0.2, 1, 0.3, 1) !important; /* Slightly slower transition */
    will-change: transform !important;
    opacity: 1 !important;
    color: white !important;
    backface-visibility: hidden;
}

/* Special handling for target text elements in final zoom phase */
.zoom-target-stripe .scroll-text {
    transform-origin: center center !important;
    transition: transform 0.6s cubic-bezier(0.1, 1, 0.2, 1) !important; /* Adjusted transition time */
    will-change: transform !important;
    z-index: 100;
}

/* Update text scaling effect for much more subtle expansion */
.zoom-ready .scroll-text {
    transform-origin: center center !important;
    transition: transform 0.9s cubic-bezier(0.1, 0.7, 0.1, 1) !important; /* Smoother, gentler transition */
    will-change: transform !important;
    opacity: 1 !important;
    color: white !important;
    backface-visibility: hidden;
}

/* Special handling for target text elements with gentler scaling */
.zoom-target-stripe .scroll-text {
    transform-origin: center center !important;
    transition: transform 0.8s cubic-bezier(0.1, 0.7, 0.1, 1) !important; /* Gentler easing */
    will-change: transform !important;
    z-index: 100;
}

/* Text phrase color classes - each phrase gets its own color */
.text-phrase-1 { /* สุขสันต์ */
    color: #ffdb4d !important; /* Yellow */
}

.text-phrase-2 { /* วันเกิด */
    color: #ff7eb3 !important; /* Pink */
}

.text-phrase-3 { /* คับผม */
    color: #4dffdb !important; /* Cyan */
}

/* Override to ensure text keeps its assigned color during zoom */
.zoom-ready .scroll-text,
.zoom-target-stripe .scroll-text {
    color: inherit !important; /* Use the color from text-phrase classes */
}

/* Special handling for target text elements with gentler scaling */
.zoom-target-stripe .scroll-text {
    transform-origin: center center !important;
    transition: transform 0.8s cubic-bezier(0.1, 0.7, 0.1, 1) !important; /* Gentler easing */
    will-change: transform !important;
    z-index: 100;
}

/* Text phrase color classes with increased specificity and !important to override all other rules */
.text-phrase-1, 
.zoom-ready .text-phrase-1,
.zoom-target-stripe .text-phrase-1 { /* สุขสันต์ */
    color: #ffdb4d !important; /* Yellow */
}

.text-phrase-2,
.zoom-ready .text-phrase-2,
.zoom-target-stripe .text-phrase-2 { /* วันเกิด */
    color: #ff7eb3 !important; /* Pink */
}

.text-phrase-3,
.zoom-ready .text-phrase-3,
.zoom-target-stripe .text-phrase-3 { /* คับผม */
    color: #4dffdb !important; /* Cyan */
}

/* Remove any rules that force text to white/black colors during zoom */
.zoom-ready .scroll-text {
    transform-origin: center center !important;
    transition: transform 0.9s cubic-bezier(0.1, 0.7, 0.1, 1) !important; /* Smoother, gentler transition */
    will-change: transform !important;
    opacity: 1 !important;
    /* color: white !important; */ /* Removed this to preserve text colors */
    backface-visibility: hidden;
}

/* Special handling for target text elements with gentler scaling */
.zoom-target-stripe .scroll-text {
    transform-origin: center center !important;
    transition: transform 0.8s cubic-bezier(0.1, 0.7, 0.1, 1) !important; /* Gentler easing */
    will-change: transform !important;
    z-index: 100;
    /* No color override here */
}

/* Text phrase color classes with maximum specificity to prevent overrides */
.text-phrase-1, 
.zoom-ready .text-phrase-1,
.zoom-target-stripe .text-phrase-1,
.zoom-target-text.text-phrase-1 { /* สุขสันต์ */
    color: #ffdb4d !important; /* Yellow */
}

.text-phrase-2,
.zoom-ready .text-phrase-2,
.zoom-target-stripe .text-phrase-2,
.zoom-target-text.text-phrase-2 { /* วันเกิด */
    color: #ff7eb3 !important; /* Pink */
}

.text-phrase-3,
.zoom-ready .text-phrase-3,
.zoom-target-stripe .text-phrase-3,
.zoom-target-text.text-phrase-3 { /* คับผม */
    color: #4dffdb !important; /* Cyan */
}

/* Remove ALL color overrides during zoom for scrolling text */
.zoom-ready .scroll-text,
.zoom-target-stripe .scroll-text,
.zoom-target-text {
    /* Prevent any color overrides but keep other transitions */
    transition: transform 0.9s cubic-bezier(0.1, 0.7, 0.1, 1) !important;
    will-change: transform !important;
    opacity: 1 !important;
    /* No color property here */
}

/* Ensure zoom happens with proper perspective for the complete disappearance effect */
.zoom-ready {
    perspective: 1200px;
    perspective-origin: 50% 50%;
    transition: transform 1.5s cubic-bezier(0.23, 1, 0.32, 1), /* Slower transition */
                perspective 1.5s cubic-bezier(0.23, 1, 0.32, 1);
    transform-style: preserve-3d;
    transform-origin: center center;
    will-change: transform, perspective;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
}

/* Special handling for target text elements with gentler scaling */
.zoom-target-stripe .scroll-text {
    transform-origin: center center !important;
    transition: transform 1.2s cubic-bezier(0.1, 0.7, 0.1, 1) !important; /* Slower transition */
    will-change: transform !important;
    z-index: 100;
}

/* Update text scaling effect for much more subtle expansion */
.zoom-ready .scroll-text {
    transform-origin: center center !important;
    transition: transform 1.2s cubic-bezier(0.1, 0.7, 0.1, 1) !important; /* Slower transition */
    will-change: transform !important;
    opacity: 1 !important;
    backface-visibility: hidden;
}

/* Special handling for target text elements with smoother transitions */
.zoom-target-stripe .scroll-text {
    transform-origin: center center !important;
    transition: transform 1.8s cubic-bezier(0.22, 1, 0.36, 1) !important; /* Slower, smoother transition */
    will-change: transform !important;
    z-index: 100;
}

/* Ensure consistent transform origin for all text elements */
.zoom-ready .scroll-text {
    transform-origin: center center !important;
    transition: transform 1.8s cubic-bezier(0.22, 1, 0.36, 1) !important; /* Slower, smoother transition */
    will-change: transform !important;
    opacity: 1 !important;
    backface-visibility: hidden;
}

/* Ensure smooth zoom acceleration with optimized perspective */
.zoom-ready {
    perspective: 1200px;
    perspective-origin: 50% 50%;
    transition: transform 1.8s cubic-bezier(0.22, 1, 0.36, 1), 
                perspective 1.8s cubic-bezier(0.22, 1, 0.36, 1);
    transform-style: preserve-3d;
    transform-origin: center center;
    will-change: transform, perspective;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
}

/* Ensure transition property only affects transform for more predictable animation */
.zoom-target-text {
    transition-property: transform !important;
    transition-duration: 1.8s !important;
    transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1) !important;
    transform-origin: center center !important;
}

/* Special handling for target text elements with super-smooth transitions */
.zoom-target-stripe .scroll-text {
    transform-origin: center center !important;
    /* Support both transform and opacity transitions smoothly */
    transition: transform 2s cubic-bezier(0.22, 1, 0.36, 1),
                opacity 1.5s cubic-bezier(0.22, 1, 0.36, 1) !important;
    will-change: transform, opacity !important;
    z-index: 100;
}

/* Ensure consistent transform origin for all text elements */
.zoom-ready .scroll-text {
    transform-origin: center center !important;
    /* Support both transform and opacity transitions */
    transition: transform 2s cubic-bezier(0.22, 1, 0.36, 1),
                opacity 1.5s cubic-bezier(0.22, 1, 0.36, 1) !important;
    will-change: transform, opacity !important;
    backface-visibility: hidden;
}

/* Smoother overlay transition with longer duration */
#zoom-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    opacity: 0;
    transition: opacity 2s cubic-bezier(0.22, 1, 0.36, 1);
    pointer-events: none;
}

/* Special handling for target text elements with ultra-smooth transitions */
.zoom-target-stripe .scroll-text {
    transform-origin: center center !important;
    /* Even longer and smoother transition */
    transition: transform 3s cubic-bezier(0.1, 0.7, 0.1, 1),
                opacity 2.5s cubic-bezier(0.1, 0.7, 0.1, 1) !important;
    will-change: transform, opacity !important;
    z-index: 100;
}

/* Ensure smooth overlay with longer duration */
#zoom-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    opacity: 0;
    transition: opacity 3s cubic-bezier(0.1, 0.7, 0.1, 1);
    pointer-events: none;
}

/* Smoother overlay transition with longer duration */
#zoom-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    opacity: 0;
    transition: opacity 2.5s cubic-bezier(0.19, 1, 0.22, 1);
    pointer-events: none;
}

/* Ensure smooth zoom with optimized rendering */
.zoom-ready {
    perspective: 1200px;
    perspective-origin: 50% 50%;
    transition: transform 2.5s cubic-bezier(0.19, 1, 0.22, 1), 
                perspective 2.5s cubic-bezier(0.19, 1, 0.22, 1);
    transform-style: preserve-3d;
    transform-origin: center center;
    will-change: transform, perspective;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
}

/* Ensure ultra-smooth transitions for all elements involved in zoom */
.zoom-target-stripe .scroll-text {
    transform-origin: center center !important;
    /* Even longer transition for maximum smoothness */
    transition: transform 5s cubic-bezier(0.1, 0.7, 0.1, 1),
                opacity 4s cubic-bezier(0.1, 0.7, 0.1, 1) !important;
    will-change: transform, opacity !important;
    z-index: 100;
    /* Prevent any unexpected movements */
    backface-visibility: hidden;
}

/* Ensure extremely long, smooth overlay transition */
#zoom-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    opacity: 0;
    transition: opacity 5s cubic-bezier(0.1, 0.7, 0.1, 1);
    pointer-events: none;
    /* Prevent any rendering artifacts */
    backface-visibility: hidden;
    will-change: opacity;
}

/* Ensure ultra-smooth transitions for all elements involved in zoom */
.zoom-target-stripe .scroll-text {
    transform-origin: center center !important;
    /* Even longer transition for maximum smoothness */
    transition: transform 5s cubic-bezier(0.1, 0.7, 0.1, 1),
                opacity 4s cubic-bezier(0.1, 0.7, 0.1, 1) !important;
    will-change: transform, opacity !important;
    z-index: 100;
    /* Prevent any unexpected movements */
    backface-visibility: hidden;
}

/* Ensure extremely long, smooth overlay transition */
#zoom-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    opacity: 0;
    transition: opacity 5s cubic-bezier(0.1, 0.7, 0.1, 1);
    pointer-events: none;
    /* Prevent any rendering artifacts */
    backface-visibility: hidden;
    will-change: opacity;
}

/* Prevent any potential glitches in zoom target text transforms */
.zoom-target-text {
    /* Force hardware acceleration to prevent text rendering glitches */
    transform: translateZ(0); 
    backface-visibility: hidden !important;
    -webkit-backface-visibility: hidden !important;
    will-change: transform;
    /* Ultra-smooth transition for combined transforms to prevent snapping */
    transition: transform 5s cubic-bezier(0.1, 0.7, 0.1, 1) !important;
}

/* Ensure transform style preserves 3D for the entire hierarchy */
.stacking-container, 
.zoom-ready,
.zoom-target-stripe,
.text-scroller,
.text-track {
    transform-style: preserve-3d !important;
    -webkit-transform-style: preserve-3d !important;
}

/* Critical fix: Restore initial animation for stripes */
.stacking-rectangle {
    position: absolute;
    left: 0;
    width: 100%;
    height: 100%;
    top: 0;
    transform: translateY(-100%); /* Start above the viewport */
    /* Specifically prioritize this transition for the initial slide in */
    transition: transform 1.2s cubic-bezier(0.25, 1, 0.5, 1) !important;
    display: flex;
    align-items: center;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    box-sizing: border-box;
}

/* Only disable transitions on zoom target text when zooming begins */
.zoom-ready .zoom-target-text {
    /* Force hardware acceleration */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    /* Prevent any automatic adjustments from the browser */
    backface-visibility: hidden !important;
    -webkit-backface-visibility: hidden !important;
    /* Disable transitions only after zoom starts */
    transition: none !important;
    -webkit-transition: none !important;
    animation: none !important;
    -webkit-animation: none !important;
    /* Ensure pixel-perfect rendering */
    image-rendering: -webkit-optimize-contrast;
    text-rendering: geometricPrecision;
}

/* Ensure zoom-target-stripe doesn't override initial animation */
.stacking-rectangle.zoom-target-stripe {
    /* Only apply this transition after zoom starts */
    transition: transform 1.2s cubic-bezier(0.25, 1, 0.5, 1) !important;
}

/* Complete solution for zoom target text stability */
.zoom-target-text {
    /* Force hardware acceleration */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    
    /* Critical: Disable all CSS transitions/animations */
    transition: none !important;
    -webkit-transition: none !important;
    animation: none !important;
    -webkit-animation: none !important;
    
    /* Ensure stable rendering */
    backface-visibility: hidden !important;
    -webkit-backface-visibility: hidden !important;
    perspective: 1000px;
    -webkit-perspective: 1000px;
    transform-style: flat !important;
    -webkit-transform-style: flat !important;
    
    /* Ensure the best pixel-perfect rendering */
    image-rendering: -webkit-optimize-contrast;
    text-rendering: geometricPrecision;
    
    /* Fix position during zoom */
    position: relative;
    will-change: transform;
    
    /* Ensure exact sizing without rounding errors */
    letter-spacing: inherit !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
    
    /* Optimize for Thai script */
    font-kerning: none !important;
    font-feature-settings: normal !important;
}

/* Once zoom is ready, disable transitions on the target stripe */
.zoom-ready .zoom-target-stripe {
    transition: none !important;
}

/* Complete fix for text jittering - eliminate ALL transitions on zoom target text */
.zoom-target-text {
    /* Force hardware acceleration */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    /* Prevent any automatic adjustments from the browser */
    backface-visibility: hidden !important;
    -webkit-backface-visibility: hidden !important;
    /* Disable all CSS animation and transitions */
    transition: none !important;
    -webkit-transition: none !important;
    animation: none !important;
    -webkit-animation: none !important;
    /* Ensure pixel-perfect rendering */
    image-rendering: -webkit-optimize-contrast;
    text-rendering: geometricPrecision;
    /* Force position to not get affected by container changes */
    transform-style: flat !important;
    -webkit-transform-style: flat !important;
}

/* Remove all conflicting transitions on all potentially related elements */
.zoom-ready .zoom-target-text,
.zoom-target-stripe .zoom-target-text,
.text-track .zoom-target-text,
.text-scroller .zoom-target-text {
    transition: none !important;
    -webkit-transition: none !important;
    animation: none !important;
    -webkit-animation: none !important;
}

/* Make sure our fix doesn't override the initial slide-in animation */
.stacking-rectangle:not(.zoom-target-stripe) {
    transition: transform 1.2s cubic-bezier(0.25, 1, 0.5, 1) !important;
}

/* Force hardware-accelerated rendering throughout the hierarchy */
.stacking-container,
.zoom-ready,
.zoom-target-stripe,
.text-scroller,
.text-track,
.scroll-text {
    /* Force GPU acceleration on all elements in the chain */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden !important;
    -webkit-backface-visibility: hidden !important;
    /* Ensure 3D context is preserved */
    transform-style: preserve-3d !important;
    -webkit-transform-style: preserve-3d !important;
}

/* Divided screen styles */
#divided-screen {
    background-color: #000; /* Black background or use another color */
    width: 100%;
    height: 100%;
    position: fixed;
    z-index: 1001;
}

.upper-section, .lower-section {
    background-color: #000; /* Dark background for upper section */
    color: #fff; /* White text */
    position: relative;
    overflow: hidden;
}

/* Typewriter container styling - fixed size from start */
.typewriter {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    max-width: 100%;
    position: relative;
}

/* New typewriter text styling with fixed dimensions */
.typewriter-text {
    display: block;
    white-space: normal;
    word-break: break-word;
    letter-spacing: .05em;
    margin: 0;
    padding: 0;
    line-height: 1.5;
    text-align: center;
    width: 100%;
    opacity: 1;
    position: relative;
}

/* Individual character animations */
.typewriter-text span {
    transition: opacity 0.1s ease;
    display: inline-block;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .typewriter-text {
        font-size: clamp(0.875rem, 3.5vw, 1.75rem);
    }
    
    .screen-section {
        padding: 1rem;
    }
}

@media (max-width: 480px) {
    .typewriter-text {
        font-size: clamp(0.75rem, 3vw, 1.5rem);
    }
    
    .screen-section {
        padding: 0.5rem;
    }
}

/* Typewriter effect */
.typewriter {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    max-width: 100%;
    transform-origin: center;
    position: relative;
}

/* Typewriter effect - modified to remove cursor */
.typewriter p {
    overflow: hidden;
    /* Removed border-right (cursor) property */
    display: inline-block;
    white-space: normal;
    word-break: break-word;
    letter-spacing: .05em;
    margin: 0;
    padding: 0;
    line-height: 1.5;
    text-align: left;
    position: relative;
    transform-origin: center center;
    max-width: 0;
    animation: 
        typing-width 3.5s steps(40, end) forwards; /* Removed blink-caret animation */
    height: auto;
    overflow-wrap: break-word;
    transform: scaleY(1.5) scaleX(0.8);
    animation-fill-mode: forwards;
}

/* The first character that remains fixed in place */
.typewriter p .first-char {
    display: inline-block;
    position: relative;
    text-align: left;
    transform-origin: left center;
}

/* Delay the second paragraph */
.lower-section .typewriter p {
    animation-delay: 3.7s; /* Starts after the first paragraph finishes */
}

/* Width animation for typing effect */
@keyframes typing-width {
    0% { 
        max-width: 1ch; /* Start with just enough width for the first character */
        transform: scaleY(1.5) scaleX(0.8);
    }
    10% {
        transform: scaleY(1.3) scaleX(0.85);
    }
    30% {
        transform: scaleY(1.2) scaleX(0.9);
    }
    60% {
        transform: scaleY(1.1) scaleX(0.95);
    }
    100% { 
        max-width: 100%; /* End with full width */
        transform: scaleY(1) scaleX(1);
    }
}

/* Remove the blink-caret animation entirely */
/* @keyframes blink-caret has been removed */

/* Responsive adjustments */
@media (max-width: 768px) {
    .typewriter p {
        font-size: clamp(0.875rem, 3.5vw, 1.75rem);
    }
    
    .screen-section {
        padding: 1rem;
    }
}

@media (max-width: 480px) {
    .typewriter p {
        font-size: clamp(0.75rem, 3vw, 1.5rem);
    }
    
    .screen-section {
        padding: 0.5rem;
    }
}

/* Typewriter container styling with fixed dimensions */
.typewriter-container {
    width: 100%;
    max-width: 80%;
    margin: 0 auto;
    text-align: center;
    position: relative;
    display: block;
    /* No transitions or animations that could cause movement */
}

/* Typewriter text styling - no animations except for character visibility */
.typewriter-text {
    font-family: 'SaoChingcha', Arial, sans-serif;
    font-size: clamp(1rem, 4vw, 2.5rem);
    text-align: center;
    margin: 0;
    padding: 0;
    line-height: 1.5;
    width: 100%;
    position: relative;
    white-space: normal;
    word-break: break-word;
    /* No text shadow, using pure color contrast instead */
}

/* Individual character spans */
.typewriter-text span {
    display: inline-block;
    position: relative;
    transition: opacity 0.1s ease;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .typewriter-text {
        font-size: clamp(0.875rem, 3.5vw, 1.75rem);
    }
    
    .screen-section {
        padding: 1.5rem; /* Reduced padding for medium screens */
    }
}

@media (max-width: 480px) {
    .typewriter-text {
        font-size: clamp(0.75rem, 3vw, 1.5rem);
    }
    
    .screen-section {
        padding: 1rem; /* Further reduced padding for small screens */
    }
}

/* Transition rectangle styling */
.transition-rectangle {
    position: absolute;
    left: 0;
    width: 100%;
    z-index: 1;
    transition: height 1.5s cubic-bezier(0.25, 1, 0.5, 1);
    will-change: height;
}

/* Remove the old typewriter styles that cause movement */
.typewriter p {
    /* Removing styles that cause movement */
    animation: none;
    transform: none;
    max-width: none;
    overflow: visible;
}

/* Remove the width animation for typing effect */
@keyframes typing-width {
    0%, 100% { 
        transform: none;
        max-width: 100%;
    }
}

/* Typewriter container styling with fixed dimensions */
.typewriter-container {
    width: 100%;
    max-width: 80%;
    margin: 0 auto;
    text-align: center;
    position: relative;
    display: block;
    /* No transitions or animations that could cause movement */
}

/* Typewriter text styling - no animations except for character visibility */
.typewriter-text {
    font-family: 'SaoChingcha', Arial, sans-serif;
    font-size: clamp(1rem, 4vw, 2.5rem);
    text-align: center;
    margin: 0;
    padding: 0;
    line-height: 1.5;
    width: 100%;
    position: relative;
    white-space: normal;
    word-break: break-word;
}

/* Individual character spans */
.typewriter-text span {
    display: inline-block;
    position: relative;
    transition: opacity 0.1s ease;
}

/* Expanding rectangle styling */
.expanding-rectangle {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 0;
    z-index: 1;
    transition: height 1.2s cubic-bezier(0.25, 1, 0.5, 1);
    will-change: height;
    transform-origin: bottom center;
}

/* Make sure the lower section text sits on top of the expanding rectangle */
.lower-section {
    position: relative;
    z-index: 2;
    background-color: transparent !important;
}

/* Pulsing image effect styles */
.pulsing-image-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1002;
    pointer-events: none;
    overflow: hidden;
}

.pulsing-image {
    max-width: 90%;
    object-fit: contain;
    object-position: top center;
    will-change: transform, filter;
    transform-origin: center center;
    filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3));
}

/* Handle different device orientations */
@media (orientation: landscape) {
    .pulsing-image {
        width: 90%;
        height: auto;
        max-height: 90vh;
    }
}

@media (orientation: portrait) {
    .pulsing-image {
        width: 90%;
        height: auto;
        max-height: 70vh;
    }
}
